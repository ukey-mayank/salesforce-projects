<template>
  <lightning-card title="Opportunity Health Monitor">
    <template if:true={isLoading}>
      <div class="slds-p-around_medium slds-align_absolute-center">
        <lightning-spinner alternative-text="Evaluating health" size="small">
        </lightning-spinner>
      </div>
    </template>

    <template if:true={opportunity}>
      <div class="slds-p-around_medium">
        <p><b>Stage:</b> {stage}</p>
        <p><b>Amount:</b> {amount}</p>
        <p><b>Created Date:</b> {createdDate}</p>

        <div class="slds-m-vertical_small">
          <lightning-badge label={healthStatus} class={healthClass}>
          </lightning-badge>
        </div>

        <template if:true={healthReason}>
          <p class="slds-text-body_small slds-m-bottom_small">
            <i>{healthReason}</i>
          </p>
        </template>

        <lightning-button
          label="Evaluate Health"
          variant="brand"
          onclick={handleEvaluate}
          disabled={isLoading}
        >
        </lightning-button>
      </div>
    </template>

    <template if:true={error}>
      <div class="slds-p-around_medium slds-text-color_error">{error}</div>
    </template>
  </lightning-card>
</template>
